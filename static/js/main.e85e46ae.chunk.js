(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,c){},16:function(e,t,c){},18:function(e,t,c){"use strict";c.r(t);var n=c(1),o=c.n(n),a=c(7),s=c.n(a),r=(c(14),c(6)),i=c.n(r),l=c(9),u=c(8),j=c(2),h=(c(16),c(0));function f(e){return"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,".jpg")}var m=function(e){var t=Object(n.useState)(!1),c=Object(j.a)(t,2),o=c[0],a=c[1],s=Object(n.useState)(!0),r=Object(j.a)(s,2),i=r[0],l=r[1];function u(){a(!o),l(!i),console.log("clicked")}return Object(h.jsxs)("li",{children:[Object(h.jsx)("img",{className:"small",src:f(e.image_src),onClick:u,alt:e.image_src}),o&&Object(h.jsx)("dialog",{className:"dialog",style:{position:"fixed"},open:!0,onClick:u,children:Object(h.jsx)("img",{className:"image",src:f(e.image_src),onClick:u,alt:e.image_src})})]})};var d=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],o=t[1],a=Object(n.useState)(""),s=Object(j.a)(a,2),r=s[0],f=s[1],d=Object(n.useState)(1),g=Object(j.a)(d,2),p=g[0],b=g[1],O=Object(n.useState)(null),v=Object(j.a)(O,2),x=v[0],w=v[1];function k(e){e.preventDefault(),console.log("searching...");var t=r;e.target.query&&(t=e.target.query),w(null);var c="https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=e58db5c37e31c2add7ff47165e528488&safe_search=1&tags=".concat(t,"&format=json&nojsoncallback=1");fetch(c).then((function(e){return e.json()})).then((function(e){console.log({data:e}),o(e.photos.photo)}));var n=JSON.parse(localStorage.getItem("names"));null==n&&(n=[]),r.length>0&&!n.includes(r)&&(n.push(r),n.length>5&&n.splice(0,1),localStorage.setItem("names",JSON.stringify(n)))}return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=4c3bbea6f1816a65e5188d6322acc462&format=json&nojsoncallback=1").then((function(e){return e.json()})).then((function(e){o(Object(l.a)(c.concat(e.photos.photo)))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[p]),window.onscroll=function(){window.scrollY/document.documentElement.scrollHeight>=.95&&(console.log("working",window.scrollY,window.innerHeight,document.documentElement.scrollHeight),b(p+1))},Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("header",{className:"App-header",children:Object(h.jsx)("div",{className:"app-search-section",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Search Photos"}),Object(h.jsxs)("form",{onSubmit:k,onBlur:function(){w(null)},children:[Object(h.jsx)("input",{type:"text",value:r,onFocus:function(){var e=JSON.parse(localStorage.getItem("names"));w(e)},onChange:function(e){f(e.target.value)}}),Object(h.jsx)("ul",{id:"query-list",children:x&&x.map((function(e){return Object(h.jsx)("li",{onClick:function(t){console.log("ff"),f(e),t.target.query=e,k(t)},children:e},e)}))})]})]})})}),Object(h.jsx)("div",{className:"my-image",children:c.length>0&&c.map((function(e,t){return Object(h.jsx)(m,{image_src:e},e.id+t)}))})]})},g=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,19)).then((function(t){var c=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),o(e),a(e),s(e)}))};s.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(d,{})}),document.getElementById("root")),g()}},[[18,1,2]]]);
//# sourceMappingURL=main.e85e46ae.chunk.js.map